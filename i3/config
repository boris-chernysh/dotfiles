set $mod Mod4

set $terminal terminator
set $lock gnome-screensaver-command -l

set $im_mode_title "IM:  [T]elegram, [S]lack"
set $power_mode_title "Power: [L]ock, [H]ybernate, [S]hutdown, [R]eboot"

set $tag1 1.Workplace
set $tag2 2.Workplace
set $tag3 3.IM
set $tag4 4.Playground
set $tag5 5.Music
set $tag6 6.Education
set $tag7 7.Interview
set $tag8 8.Email

set $fontName Ubuntu
set $fontSize 11
font pango:$fontName $fontSize

bindsym $mod+Return exec $terminal
bindsym $mod+Shift+q kill
# bindsym $mod+d exec exec rofi -show run
bindsym $mod+d exec dmenu_run -fn $fontName-$fontSize

bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right

bindsym $mod+Shift+h move left
bindsym $mod+Shift+j move down
bindsym $mod+Shift+k move up
bindsym $mod+Shift+l move right

bindsym $mod+b split h
bindsym $mod+v split v

bindsym $mod+f fullscreen

bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

bindsym $mod+Shift+space floating toggle
bindsym $mod+space focus mode_toggle

bindsym $mod+a focus parent
bindsym $mod+Shift+a focus child

bindsym $mod+1 workspace $tag1
bindsym $mod+2 workspace $tag2
bindsym $mod+3 workspace $tag3
bindsym $mod+4 workspace $tag4
bindsym $mod+5 workspace $tag5
bindsym $mod+6 workspace $tag6
bindsym $mod+7 workspace $tag7
bindsym $mod+8 workspace $tag8

bindsym $mod+Shift+1 move container to workspace $tag1
bindsym $mod+Shift+2 move container to workspace $tag2
bindsym $mod+Shift+3 move container to workspace $tag3
bindsym $mod+Shift+4 move container to workspace $tag4
bindsym $mod+Shift+5 move container to workspace $tag5
bindsym $mod+Shift+6 move container to workspace $tag6
bindsym $mod+Shift+7 move container to workspace $tag7
bindsym $mod+Shift+8 move container to workspace $tag8

bindsym $mod+Shift+c reload
bindsym $mod+Shift+r restart
bindsym $mod+Shift+e exec "i3-nagbar -t warning -m 'You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.' -b 'Yes, exit i3' 'i3-msg exit'"

bindsym $mod+g exec $browser
bindsym $mod+t border toggle
bindsym $mod+m bar mode toggle

bindsym XF86AudioRaiseVolume exec amixer -q -D pulse sset Master 7%+, exec pkill -SIGRTMIN+2 i3blocks
bindsym XF86AudioLowerVolume exec amixer -q -D pulse sset Master 7%-, exec pkill -SIGRTMIN+2 i3blocks
bindsym XF86AudioMute exec amixer -q -D pulse sset Master toggle, exec pkill -SIGRTMIN+2 i3blocks

bindsym XF86MonBrightnessDown exec xbacklight -dec 10, exec pkill -SIGRTMIN+3 i3blocks
bindsym XF86MonBrightnessUp exec xbacklight -inc 10, exec pkill -SIGRTMIN+3 i3blocks

bindsym XF86Display exec --no-startup-id xrandr --output eDP1 --auto --output HDMI1 --off
bindsym $mod+XF86Display exec --no-startup-id xrandr --output eDP1 --off --output HDMI1 --auto

# listen ctrl and send code 1 for i3block layout command
bindcode 37 exec pkill -SIGRTMIN+1 i3blocks

exec --no-startup-id nm-applet
# exec --no-startup-id volumeicon
# exec --no-startup-id cbatticon
exec --no-startup-id screencloud
exec --no-startup-id feh --bg-scale ~/.wallpaper.jpg
# exec --no-startup-id setxkbmap -layout 'us,ru' -option 'lv3:ralt_switch,grp:lctrl_toggle,ctrl:nocaps,grp_led:caps'
exec --no-startup-id compton -b --backend glx --vsync opengl-swc --xrender-sync

mode "resize" {
	bindsym h resize shrink width 10 px or 10 ppt
	bindsym j resize grow height 10 px or 10 ppt
	bindsym k resize shrink height 10 px or 10 ppt
	bindsym l resize grow width 10 px or 10 ppt

	bindsym Return mode "default"
	bindsym Escape mode "default"
}

bindsym $mod+r mode "resize"

mode $power_mode_title {
	bindsym l exec $lock, mode "default"
	bindsym h exec systemctl hibernate, mode "default"
	bindsym s exec systemctl poweroff, mode "default"
	bindsym r exec systemctl reboot, moide "default"

	bindsym Return mode "default"
	bindsym Escape mode "default"
}

bindsym $mod+q mode $power_mode_title

mode $im_mode_title {
	bindsym t exec $browser --app="http://web.telegram.org", mode "default"
	# bindsym c exec $browser --app="https://csssr.slack.com", mode "default"
	# bindsym t exec $browser --app="https://tinkoff.slack.com", mode "default"
	bindsym s exec slack, mode "default"

	bindsym Return mode "default"
	bindsym Escape mode "default"
}

bindsym $mod+i mode $im_mode_title

set $bg #2f343f
set $window_bg #1e232e
set $text #bbbbcc
set $active #ffffff
set $inactive #676e7d
set $separator #555577

bar {
	position top
	status_command i3blocks -c ~/dotfiles/i3/i3blocks.conf
	workspace_buttons yes
	colors {
		separator $separator
		background $bg
		statusline $text
		focused_workspace $bg $bg $text
		active_workspace $bg $bg $text
		inactive_workspace $bg $bg $inactive
		urgent_workspace $active $active $bg
	}
}

client.focused $window_bg $window_bg $text $window_bg
client.focused_inactive $window_bg $window_bg $inactive $window_bg
client.unfocused $window_bg $window_bg $inactive $window_bg
client.urgent $active $active $window_bg $active

hide_edge_borders both
